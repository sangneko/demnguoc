<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Äáº¿m ngÆ°á»£c NgÃ y Lá»… Lá»›n</title>
<style>
  :root{
    --bg:#0f172a;      /* slate-900 */
    --card:#111827;    /* gray-900 */
    --muted:#94a3b8;   /* slate-400 */
    --text:#e5e7eb;    /* gray-200 */
    --accent:#22d3ee;  /* cyan-400 */
    --accent2:#a78bfa; /* violet-400 */
    --good:#34d399;    /* emerald-400 */
    --warn:#f59e0b;    /* amber-500 */
    --danger:#ef4444;  /* red-500 */
    --ring: 0 0 0 3px rgba(34,211,238,.25);
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    background: radial-gradient(1200px 600px at 80% -10%, rgba(167,139,250,.15), transparent 60%),
                radial-gradient(900px 500px at 10% 110%, rgba(34,211,238,.12), transparent 60%),
                var(--bg);
    color:var(--text);
    min-height:100svh;
    display:flex; align-items:center; justify-content:center; padding:24px;
  }
  .app{
    width:100%; max-width:980px;
  }
  header{
    display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap;
    margin-bottom:16px;
  }
  h1{font-size:clamp(22px, 3.2vw, 34px); margin:0; letter-spacing:.3px}
  .controls{
    display:flex; gap:10px; align-items:center; flex-wrap:wrap;
  }
  .ctrl{
    background: rgba(255,255,255,.04);
    border:1px solid rgba(255,255,255,.08);
    color:var(--text); border-radius:12px; padding:10px 12px; display:flex; align-items:center; gap:8px;
  }
  .ctrl input[type="number"], .ctrl input[type="text"]{
    background:transparent; border:none; color:var(--text); width:90px; outline:none; font-size:14px;
  }
  .ctrl input[type="checkbox"]{transform:scale(1.1)}
  .list{
    display:grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap:14px;
  }
  .card{
    background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    border:1px solid rgba(255,255,255,.08);
    border-radius:18px; padding:16px; position:relative; overflow:hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,.25);
    transition: transform .2s ease, border-color .2s ease;
  }
  .card:hover{ transform: translateY(-2px); border-color: rgba(34,211,238,.35);}
  .badge{
    position:absolute; top:10px; right:12px; font-size:12px; padding:4px 8px; border-radius:999px;
    color:#041014; background:linear-gradient(90deg, var(--accent), var(--accent2)); font-weight:700; letter-spacing:.4px;
  }
  .name{ display:flex; align-items:center; gap:10px; font-size:16px; font-weight:700; }
  .name .emoji{ font-size:20px }
  .date{ color:var(--muted); font-size:13px; margin-top:2px; }
  .countdown{
    margin-top:10px; font-variant-numeric: tabular-nums; font-size:26px; font-weight:800;
  }
  .sub{
    color:var(--muted); font-size:12px; margin-top:6px;
  }
  .bar{
    height:7px; background:rgba(255,255,255,.06); border-radius:999px; margin-top:12px; overflow:hidden;
    outline:1px solid rgba(255,255,255,.06);
  }
  .bar > div{
    height:100%; width:0%;
    background: linear-gradient(90deg, var(--accent), var(--accent2));
    transition: width .6s ease;
  }
  .note{
    margin-top:16px; color:var(--muted); font-size:13px; line-height:1.5;
  }
  footer{ margin-top:14px; display:flex; justify-content:center; color:var(--muted); font-size:12px; }
  .status.upcoming{color:var(--good)}
  .status.soon{color:var(--warn)}
  .status.past{color:var(--danger)}
  .search{ width:180px }
  @media (max-width:480px){
    .list{ grid-template-columns: 1fr; }
    .search{ width:140px }
  }
</style>
</head>
<body>
<div class="app">
  <header>
    <h1>ğŸ—“ï¸ Äáº¿m ngÆ°á»£c NgÃ y Lá»… Lá»›n</h1>
    <div class="controls">
      <label class="ctrl">NÄƒm:
        <input id="yearInput" type="number" min="1900" max="3000" />
      </label>
      <label class="ctrl">TÃ¬m:
        <input id="searchInput" class="search" type="text" placeholder="vÃ­ dá»¥: Quá»‘c khÃ¡nh, 30/4â€¦" />
      </label>
      <label class="ctrl" title="áº¨n/hiá»‡n sá»± kiá»‡n Ä‘Ã£ qua">
        <input id="togglePast" type="checkbox" checked /> Hiá»‡n sá»± kiá»‡n Ä‘Ã£ qua
      </label>
    </div>
  </header>

  <section id="list" class="list" aria-live="polite"></section>

  <p class="note">
    ğŸ’¡ <b>ThÃªm/Sá»­a sá»± kiá»‡n</b>: chá»‰nh máº£ng <code>HOLIDAYS</code> trong code.  
    ğŸ” Sá»± kiá»‡n cá»‘ Ä‘á»‹nh theo ngÃ y/thÃ¡ng sáº½ tá»± Ä‘á»•i theo <b>NÄƒm</b> báº¡n chá»n.  
    ğŸŒ™ CÃ¡c ngÃ y <b>Ã¢m lá»‹ch</b> (Táº¿t Ã‚m, Trung Thu, Giá»— Tá»•â€¦) thay Ä‘á»•i theo nÄƒm â€” hÃ£y Ä‘iá»n ngÃ y dÆ°Æ¡ng lá»‹ch tÆ°Æ¡ng á»©ng vÃ o trÆ°á»ng <code>absolute</code>.
  </p>
  <footer>Made for ğŸ‡»ğŸ‡³ â€¢ Nhanh - Gá»n - Äáº¹p</footer>
</div>

<script>
/** =========================
 *  Cáº¤U HÃŒNH Sá»° KIá»†N MáºªU
 *  =========================
 *  CÃ³ 2 cÃ¡ch Ä‘áº·t ngÃ y:
 *   1) fixed:  { name, emoji, fixed:{month, day} }  â†’ tá»± thay Ä‘á»•i theo NÄƒm
 *   2) absolute: { name, emoji, absolute:"YYYY-MM-DD" } â†’ dÃ¹ng cho ngÃ y Ã¢m Ä‘Ã£ quy Ä‘á»•i
 */
const HOLIDAYS = [
  // â€”â€” Cá»‘ Ä‘á»‹nh ngÃ y/thÃ¡ng (tá»± Ä‘á»•i theo nÄƒm) â€”â€”
   { name:"Táº¿t DÆ°Æ¡ng Lá»‹ch", emoji:"ğŸ‰", date:"2025-01-01" },
  { name:"Táº¿t NguyÃªn ÄÃ¡n (MÃ¹ng 1 AL)", emoji:"ğŸ§§", date:"2025-01-29" },
  { name:"MÃ¹ng 2 Táº¿t", emoji:"ğŸ§§", date:"2025-01-30" },
  { name:"MÃ¹ng 3 Táº¿t", emoji:"ğŸ§§", date:"2025-01-31" },
  { name:"MÃ¹ng 4 Táº¿t", emoji:"ğŸ§§", date:"2025-02-01" },
  { name:"MÃ¹ng 5 Táº¿t", emoji:"ğŸ§§", date:"2025-02-02" },
  { name:"Valentine", emoji:"ğŸ’˜", date:"2025-02-14" },
  { name:"Quá»‘c táº¿ Phá»¥ ná»¯", emoji:"ğŸŒ·", date:"2025-03-08" },
  { name:"Giá»— Tá»• HÃ¹ng VÆ°Æ¡ng (10/3 AL)", emoji:"ğŸ¦š", date:"2025-04-08" },
  { name:"NgÃ y Giáº£i phÃ³ng Miá»n Nam", emoji:"ğŸ‡»ğŸ‡³", date:"2025-04-30" },
  { name:"Quá»‘c táº¿ Lao Ä‘á»™ng", emoji:"ğŸ› ï¸", date:"2025-05-01" },
  { name:"Quá»‘c táº¿ Thiáº¿u nhi", emoji:"ğŸ§¸", date:"2025-06-01" },
  { name:"NgÃ y ThÆ°Æ¡ng binh Liá»‡t sÄ©", emoji:"ğŸ•¯ï¸", date:"2025-07-27" },
  { name:"Quá»‘c khÃ¡nh", emoji:"ğŸŒ", date:"2025-09-02" },
  { name:"Trung Thu (Ráº±m 8 AL)", emoji:"ğŸ¥®", date:"2025-10-06" },
  { name:"NgÃ y Phá»¥ ná»¯ Viá»‡t Nam", emoji:"ğŸ‘©â€ğŸ¦±", date:"2025-10-20" },
  { name:"NgÃ y NhÃ  giÃ¡o Viá»‡t Nam", emoji:"ğŸ“š", date:"2025-11-20" },
  { name:"GiÃ¡ng Sinh", emoji:"ğŸ„", date:"2025-12-25" },
];

const listEl = document.getElementById('list');
const yearInput = document.getElementById('yearInput');
const searchInput = document.getElementById('searchInput');
const togglePast = document.getElementById('togglePast');

const pad = n => String(n).padStart(2,'0');

/** Láº¥y nÄƒm hiá»‡n táº¡i á»Ÿ mÃºi giá» ngÆ°á»i dÃ¹ng */
const nowLocal = () => new Date();

/** Táº¡o Date lÃºc 00:00:00 cá»§a ngÃ y cáº§n Ä‘áº¿m (giá»¯ theo giá» Ä‘á»‹a phÆ°Æ¡ng) */
function atStartOfDay(y,m,d){
  return new Date(y, m-1, d, 0,0,0,0);
}

function getEventsForYear(year){
  const items = [];
  for(const h of HOLIDAYS){
    if(h.fixed){
      const target = atStartOfDay(year, h.fixed.month, h.fixed.day);
      items.push({ ...h, date: target });
    }else if(h.absolute){
      // absolute cÃ³ Ä‘á»‹nh dáº¡ng YYYY-MM-DD â†’ dÃ¹ng Ä‘Ãºng ngÃ y Ä‘Ã³
      const [Y, M, D] = h.absolute.split('-').map(Number);
      items.push({ ...h, date: atStartOfDay(Y, M, D) });
    }
  }
  // Náº¿u má»™t sá»± kiá»‡n trong nÄƒm Ä‘Ã£ trÃ´i qua, cÃ³ thá»ƒ thÃªm sá»± kiá»‡n cá»§a nÄƒm sau (cho fixed)
  // Ä‘á»ƒ luÃ´n cÃ³ má»¥c "láº§n káº¿ tiáº¿p" náº¿u muá»‘n. á» Ä‘Ã¢y giá»¯ nguyÃªn theo nÄƒm Ä‘Ã£ chá»n.
  return items;
}

function fmtDate(d){
  return `${pad(d.getDate())}/${pad(d.getMonth()+1)}/${d.getFullYear()}`;
}

function diffParts(ms){
  const total = Math.max(0, Math.floor(ms/1000));
  const days = Math.floor(total / 86400);
  const hrs  = Math.floor((total % 86400) / 3600);
  const mins = Math.floor((total % 3600) / 60);
  const secs = total % 60;
  return {days, hrs, mins, secs};
}

function statusClass(ms){
  if(ms <= 0) return 'past';
  // â€œsáº¯p tá»›iâ€ náº¿u cÃ²n dÆ°á»›i 7 ngÃ y
  if(ms <= 7*86400*1000) return 'soon';
  return 'upcoming';
}

/** TÃ­nh % tiáº¿n Ä‘á»™ (tá»« Ä‘áº§u nÄƒm Ä‘áº¿n ngÃ y Ä‘Ã³) Ä‘á»ƒ váº½ thanh */
function progressOfYear(date){
  const start = new Date(date.getFullYear(), 0, 1);
  const end   = new Date(date.getFullYear()+1, 0, 1);
  const total = end - start;
  const passed = Math.min(Math.max(date - start, 0), total);
  return (passed / total) * 100;
}

let state = {
  year: nowLocal().getFullYear(),
  search: '',
  showPast: true,
};

function render(){
  yearInput.value = state.year;
  const events = getEventsForYear(state.year)
    .map(e => ({...e, dateMs: e.date.getTime()}))
    .sort((a,b)=> a.dateMs - b.dateMs);

  const now = nowLocal().getTime();

  const filtered = events.filter(e => {
    const name = e.name.toLowerCase();
    const q = state.search.trim().toLowerCase();
    const isPast = (e.dateMs < now);
    if(!state.showPast && isPast) return false;
    if(q && !name.includes(q)) return false;
    return true;
  });

  listEl.innerHTML = '';
  for(const e of filtered){
    const ms = e.dateMs - now;
    const {days, hrs, mins, secs} = diffParts(ms);
    const st = statusClass(ms);
    const pct = progressOfYear(e.date);

    const card = document.createElement('article');
    card.className = 'card';
    card.innerHTML = `
      <div class="badge ${st} status">${st==='past'?'ÄÃƒ DIá»„N RA': (st==='soon'?'Sáº®P Tá»šI':'Sáº®P DIá»„N RA')}</div>
      <div class="name"><span class="emoji">${e.emoji||'ğŸ“Œ'}</span> <span>${e.name}</span></div>
      <div class="date">ğŸ“… ${fmtDate(e.date)}</div>
      <div class="countdown" data-ms="${ms}">
        ${ms<=0 ? '0 ngÃ y 00:00:00' : `${days} ngÃ y ${pad(hrs)}:${pad(mins)}:${pad(secs)}`}
      </div>
      <div class="sub">${ms<=0 ? 'Sá»± kiá»‡n Ä‘Ã£ qua.' : 'CÃ²n láº¡i Ä‘áº¿n ngÃ y diá»…n ra.'}</div>
      <div class="bar" title="Tiáº¿n Ä‘á»™ nÄƒm Ä‘áº¿n ngÃ y nÃ y">
        <div style="width:${pct.toFixed(2)}%"></div>
      </div>
    `;
    listEl.appendChild(card);
  }
}

/** Cáº­p nháº­t Ä‘áº¿m ngÆ°á»£c má»—i giÃ¢y mÃ  khÃ´ng tÃ¡i dá»±ng toÃ n bá»™ */
function tick(){
  const now = nowLocal().getTime();
  document.querySelectorAll('.countdown').forEach(el=>{
    const card = el.closest('.card');
    // Láº¥y ngÃ y tá»« pháº§n .date cá»§a card
    const dateText = card.querySelector('.date').textContent.replace('ğŸ“…','').trim();
    const [d,m,y] = dateText.split(/[\/\s]/).filter(Boolean)[0].split('/').map(Number);
    const target = atStartOfDay(y,m,d).getTime();

    const ms = target - now;
    const parts = diffParts(ms);
    el.textContent = ms<=0 ? '0 ngÃ y 00:00:00'
                           : `${parts.days} ngÃ y ${pad(parts.hrs)}:${pad(parts.mins)}:${pad(parts.secs)}`;

    const badge = card.querySelector('.badge');
    if(ms<=0){
      badge.textContent = 'ÄÃƒ DIá»„N RA';
      badge.className = 'badge past status';
      card.querySelector('.sub').textContent = 'Sá»± kiá»‡n Ä‘Ã£ qua.';
    }else if(ms<=7*86400*1000){
      badge.textContent = 'Sáº®P Tá»šI';
      badge.className = 'badge soon status';
      card.querySelector('.sub').textContent = 'CÃ²n láº¡i Ä‘áº¿n ngÃ y diá»…n ra.';
    }else{
      badge.textContent = 'Sáº®P DIá»„N RA';
      badge.className = 'badge upcoming status';
      card.querySelector('.sub').textContent = 'CÃ²n láº¡i Ä‘áº¿n ngÃ y diá»…n ra.';
    }
  });
}

yearInput.addEventListener('change', ()=>{
  const v = parseInt(yearInput.value, 10);
  state.year = isNaN(v) ? state.year : v;
  render();
});

searchInput.addEventListener('input', ()=>{
  state.search = searchInput.value;
  render();
});

togglePast.addEventListener('change', ()=>{
  state.showPast = togglePast.checked;
  render();
});

// Khá»Ÿi Ä‘á»™ng
state.year = nowLocal().getFullYear();
render();
setInterval(tick, 1000);
</script>
</body>
</html>
