<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Äáº¿m ngÆ°á»£c NgÃ y lá»… Viá»‡t Nam</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0f172a;
      color: #f8fafc;
      margin: 0; padding: 20px;
      transition: background 0.3s, color 0.3s;
    }
    h1 { text-align: center; margin-bottom: 20px; }
    header {
      display: flex; flex-wrap: wrap; gap: 10px;
      justify-content: center; margin-bottom: 20px;
    }
    .ctrl { padding: 6px 10px; border-radius: 6px; border: none; }
    input[type="text"], input[type="number"], input[type="date"] {
      padding: 5px; border-radius: 6px; border: 1px solid #ccc;
    }
    #eventList {
      display: grid; grid-template-columns: repeat(auto-fit,minmax(260px,1fr));
      gap: 15px;
    }
    .card {
      background: #1e293b;
      padding: 14px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      transition: transform 0.2s;
    }
    .card:hover { transform: scale(1.02); }
    .name { font-size: 18px; font-weight: bold; }
    .date { font-size: 14px; color: #94a3b8; margin-top: 4px; }
    .countdown { font-size: 16px; margin-top: 8px; }
    /* Light Theme */
    body.light { background: #f9fafb; color: #111; }
    body.light .card { background: #fff; color: #111; }
    body.light .date { color: #555; }
    /* Form */
    #eventForm {
      display:none; background:#1e293b;
      padding:14px; border-radius:10px; margin-bottom:15px;
    }
    body.light #eventForm { background:#e2e8f0; }
  </style>
</head>
<body>
  <h1>ğŸ“… Äáº¿m ngÆ°á»£c NgÃ y lá»… Viá»‡t Nam</h1>

  <header>
    <label class="ctrl">NÄƒm:
      <input id="yearInput" type="number" min="2024" max="2030" value="2025">
    </label>
    <label class="ctrl">TÃ¬m:
      <input id="searchInput" type="text" placeholder="VÃ­ dá»¥: Quá»‘c khÃ¡nh...">
    </label>
    <label class="ctrl">
      <input id="togglePast" type="checkbox" checked> Hiá»‡n sá»± kiá»‡n Ä‘Ã£ qua
    </label>
    <button id="themeToggle" class="ctrl">ğŸŒ™ Äá»•i Theme</button>
    <button id="addEventBtn" class="ctrl">â• ThÃªm sá»± kiá»‡n</button>
  </header>

  <!-- Form thÃªm sá»± kiá»‡n -->
  <div id="eventForm">
    <h3>ThÃªm sá»± kiá»‡n cÃ¡ nhÃ¢n</h3>
    <label>TÃªn: <input id="customName" type="text"></label><br><br>
    <label>NgÃ y: <input id="customDate" type="date"></label><br><br>
    <button id="saveEvent">LÆ°u</button>
  </div>

  <div id="eventList"></div>

  <script>
    // --- Danh sÃ¡ch ngÃ y lá»… cá»‘ Ä‘á»‹nh ---
    const HOLIDAYS = [
      { name:"Táº¿t DÆ°Æ¡ng lá»‹ch", emoji:"ğŸ‰", month:1, day:1 },
      { name:"NgÃ y Quá»‘c táº¿ Phá»¥ ná»¯", emoji:"ğŸŒ¸", month:3, day:8 },
      { name:"Giá»— Tá»• HÃ¹ng VÆ°Æ¡ng", emoji:"ğŸ‘‘", month:4, day:18 },
      { name:"NgÃ y Giáº£i phÃ³ng miá»n Nam", emoji:"ğŸ‡»ğŸ‡³", month:4, day:30 },
      { name:"Quá»‘c táº¿ Lao Ä‘á»™ng", emoji:"âš’ï¸", month:5, day:1 },
      { name:"NgÃ y Quá»‘c táº¿ Thiáº¿u nhi", emoji:"ğŸ‘¦ğŸ‘§", month:6, day:1 },
      { name:"NgÃ y ThÆ°Æ¡ng binh Liá»‡t sÄ©", emoji:"ğŸ•¯ï¸", month:7, day:27 },
      { name:"Quá»‘c khÃ¡nh", emoji:"ğŸ†", month:9, day:2 },
      { name:"NgÃ y Phá»¥ ná»¯ Viá»‡t Nam", emoji:"ğŸ’", month:10, day:20 },
      { name:"NgÃ y NhÃ  giÃ¡o Viá»‡t Nam", emoji:"ğŸ“š", month:11, day:20 },
      { name:"GiÃ¡ng sinh", emoji:"ğŸ„", month:12, day:25 }
    ];

    // --- Theme toggle ---
    const themeToggle=document.getElementById("themeToggle");
    if(localStorage.getItem("theme")==="light") document.body.classList.add("light");
    themeToggle.addEventListener("click",()=>{
      document.body.classList.toggle("light");
      localStorage.setItem("theme",document.body.classList.contains("light")?"light":"dark");
    });

    // --- ThÃªm sá»± kiá»‡n cÃ¡ nhÃ¢n ---
    const addEventBtn=document.getElementById("addEventBtn");
    const eventForm=document.getElementById("eventForm");
    const saveEvent=document.getElementById("saveEvent");
    addEventBtn.addEventListener("click",()=>{eventForm.style.display=eventForm.style.display==="none"?"block":"none"});
    saveEvent.addEventListener("click",()=>{
      const name=document.getElementById("customName").value;
      const date=document.getElementById("customDate").value;
      if(name && date){
        const events=JSON.parse(localStorage.getItem("customEvents")||"[]");
        events.push({name,emoji:"â­",absolute:date});
        localStorage.setItem("customEvents",JSON.stringify(events));
        render();
        eventForm.style.display="none";
      }
    });

    // --- HÃ m láº¥y táº¥t cáº£ sá»± kiá»‡n ---
    function getAllEvents(year){
      const customs=JSON.parse(localStorage.getItem("customEvents")||"[]");
      const holidayExpanded = HOLIDAYS.map(e=>{
        if(e.absolute) return e;
        return { ...e, absolute:`${year}-${String(e.month).padStart(2,"0")}-${String(e.day).padStart(2,"0")}` }
      });
      return [...holidayExpanded, ...customs];
    }

    // --- Render danh sÃ¡ch ---
    function render(){
      const list=document.getElementById("eventList");
      list.innerHTML="";
      const year=parseInt(document.getElementById("yearInput").value);
      const search=document.getElementById("searchInput").value.toLowerCase();
      const showPast=document.getElementById("togglePast").checked;
      const now=new Date();

      let events=getAllEvents(year).filter(e=>e.name.toLowerCase().includes(search));
      events=events.map(e=>{
        const d=new Date(e.absolute);
        let diff=Math.floor((d-now)/(1000*60*60*24));
        return { ...e, date:d, diff };
      });
      events=events.filter(e=> showPast || e.diff>=0 );
      events.sort((a,b)=>a.date-b.date);

      events.forEach(ev=>{
        const card=document.createElement("div");
        card.className="card";
        card.innerHTML=`
          <div class="name">${ev.emoji} ${ev.name}</div>
          <div class="date">ğŸ“… ${ev.date.toLocaleDateString("vi-VN")}</div>
          <div class="countdown">${ev.diff>=0?`â³ CÃ²n ${ev.diff} ngÃ y`:`âœ… ÄÃ£ qua ${-ev.diff} ngÃ y`}</div>
        `;
        list.appendChild(card);
      });
    }

    // --- Láº¯ng nghe input ---
    document.getElementById("yearInput").addEventListener("input",render);
    document.getElementById("searchInput").addEventListener("input",render);
    document.getElementById("togglePast").addEventListener("change",render);

    // --- Cáº­p nháº­t liÃªn tá»¥c ---
    setInterval(render,60*1000);
    render();
  </script>
</body>
</html>
